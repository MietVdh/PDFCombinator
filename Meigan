import java.sql.Connection;
import java.sql.PreparedStatement;
import java.sql.ResultSet;
import java.sql.SQLException;
import java.util.ArrayList;
import java.util.List;
import java.util.UUID;

public class ApplicationDAO{
	
	public List<User> getUser() {
		User user = null;
		List<User> users = new ArrayList<>();
		
		try {
			Connection connection = DBConnection.connectToDB();
			
			String sqlQuery = "SELECT * FROM PDFCombinator";
			PreparedStatement statement = connection.prepareStatement(sqlQuery);
			
			ResultSet set = statement.executeQuery();
			while(set.next()) {
				user = new User();
				user.setId(UUID.fromString(set.getString("id")));
				user.setFirstName(set.getString("FirstName"));
				user.setLastName(set.getString("LastName"));
				user.setUserName(set.getString("Username"));
				user.setEmail(set.getString("Email"));
				user.setEmail(set.getString("Password"));
				users.add(user);
				
			}
			
			
		}catch(Exception e) {
			e.printStackTrace();
		}
		
		return users;
		
		
	}

	public void deleteUser(String id) {
		try {
			// connect to db
			Connection connection = DBConnection.connectToDB();

			// write sql query to get user
			String sqlQuery = "DELETE FROM PDFCombinator WHERE id = ?;";
			PreparedStatement statement = connection.prepareStatement(sqlQuery);
			statement.setString(1, UUID.fromString(id).toString());

			// execute query
			statement.execute();

		} catch (SQLException e) {
			e.printStackTrace();
		} catch (Exception e) {
			e.printStackTrace();
		}
	}

	public void createUser(User user) {
		try {
			// connect to db
			Connection connection = DBConnection.connectToDB();

			// write select query to get user
			String sqlQuery = "INSERT into PDFCombinator (id, FirstName, LastName, Username, Email, Password) values (?, ?, ?, ?, ?, ?);";
			PreparedStatement statement = connection.prepareStatement(sqlQuery);
			statement.setString(1, user.getID().toString());
			statement.setString(2, user.getFirstName());
			statement.setString(3, user.getLastName());
			statement.setString(4, user.getUserName());
			statement.setString(5, user.getEmail());
			statement.setString(6, user.getPassword());

			// executes query
			statement.execute();

		} catch (SQLException e) {
			e.printStackTrace();

		} catch (Exception e) {
			e.printStackTrace();
		}

	}

	public void updateUser(User user) {
		try {
			// connect to db
			Connection connection = DBConnection.connectToDB();

			// write select query to get user
			String sqlQuery = "UPDATE PDFCombinator SET FirstName = ?, LastName = ?, UserName = ?, Email= ?, Password=? WHERE id = ?;";
			PreparedStatement statement = connection.prepareStatement(sqlQuery);
			statement.setString(1, user.getFirstName());
			statement.setString(2, user.getLastName());
			statement.setString(3, user.getUserName());
			statement.setString(4, user.getEmail());
			statement.setString(5, user.getPassword());
			statement.setString(6, user.getID().toString());

			// executes query
			statement.execute();

		} catch (SQLException e) {
			e.printStackTrace();
		} catch (Exception e) {
			e.printStackTrace();
		}

	}

}
import java.sql.Connection;
import java.sql.DriverManager;
import java.sql.SQLException;

public class DBConnection {
	
	private static final String USERNAME = "user";
	private static final String PASSWORD = "password";
	private static final String CONN_STRING = "jdbc:mysql://localhost/dbname";
	
	public static Connection connectToDB(){
		
		Connection connection = null;
		
		try {
			connection = DriverManager.getConnection(CONN_STRING, USERNAME, PASSWORD);
		} catch(SQLException e) {
			e.printStackTrace();
		}
		
		if(connection!=null) {
			System.out.println("Connected!");
		}
		return connection;
		
	}

}

